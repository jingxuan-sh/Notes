# 398. 随机数索引

## 题目链接

[leetcode](https://leetcode-cn.com/problems/random-pick-index/)

## 题目描述

给一个未排除的数组，从中找出特定元素的下标。如果这个元素存在多个，则每个下标
返回的概率相同。

## 解题思路

构造一个从元素值到存储下标集合的映射即可。

```java
class Solution {
    private Map<Integer, List<Integer>> reverseMapping;
    public Solution(int[] nums) {
        this.reverseMapping = new HashMap<>();
        for (int i=0; i<nums.length; i++) {
            int value = nums[i];

            List<Integer> indices = this.reverseMapping.get(value);
            if (indices == null) {
                this.reverseMapping.put(value, new ArrayList<>());
                indices = this.reverseMapping.get(value);
            }

            indices.add(i);
        }
    }

    public int pick(int target) {
        List<Integer> indices = this.reverseMapping.get(target);
        return indices.get((int)(Math.random() * indices.size()));
    }
}
```

