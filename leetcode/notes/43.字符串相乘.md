# 43. 字符串相乘

## 题目链接

[leetcode](https://leetcode-cn.com/problems/multiply-strings/)

## 题目描述

给定两个字符串表示的正整数，计算他们的乘积。

## 解题思路

手动实现乘法计算过程，比较难受的是数据位置和实际存储位置之间的映射关系。
如果为了更利于理解，可以先将字符串倒排，计算完只有再把结果倒排回来。

```java
class Solution {
    public String multiply(String num1, String num2) {
        if ("0".equals(num1) || "0".equals(num2)) return "0";

        int[] a = toInt(num1.toCharArray());
        int[] b = toInt(num2.toCharArray());

        int[] c = new int[a.length + b.length];

        for (int i=0; i<b.length; i++) {
            int x = 0;
            for (int j=0; j<a.length; j++) {
                int[] r = cal(a[index(a, j)], b[index(b, i)], x);
                add(c, i + j, r[1]);
                x = r[0];
            }

            if (x > 0) add(c, i + a.length, x);
        }

        int head = -1;
        while (++head < c.length) {
            if (c[head] != 0) {
                break;
            }
        }
        return new String(toChar(Arrays.copyOfRange(c, head, c.length)));
    }

    private int[] toInt(char[] c) {
        int[] result = new int[c.length];
        for (int i=0; i<c.length; i++) {
            result[i] = c[i] - '0';
        }
        return result;
    }

    private int[] cal(int a, int b, int x) {
        int[] result = new int[2];

        int r = a * b + x;

        result[1] = r % 10;

        r = r / 10;
        if (r > 0) result[0] = r;

        return result;
    }

    private void add(int[] target, int position, int val) {
        int sum = target[index(target, position)] + val;
        target[index(target, position)] = sum % 10;
        if (sum >= 10) {
            add(target, position + 1, sum / 10);
        }
    }

    private int index(int[] a, int position) {
        return a.length - 1 - position;
    }

    private char[] toChar(int[] v) {
        char[] result= new char[v.length];
        for (int i=0; i<v.length; i++) {
            result[i] = (char)(v[i] + '0');
        }
        return result;
    }
}
```

